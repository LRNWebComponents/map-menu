<link rel="import" href="map-menu-submenu.html">
<link rel="import" href="map-menu-item.html">


<dom-module id="map-menu-builder">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <template id="domRepeat" is="dom-repeat" items="[[items]]" as="item">
      <template is="dom-if" if="[[__hasChildren(item)]]">
      <map-menu-submenu title="[[item.title]]" url="[[item.url]]" icon="[[item.icon]]" open="[[item.active]]" avatar-label="[[item.avatarLabel]]">
          <map-menu items="[[item.children]]"></map-menu>
        </map-menu-submenu>
      </template>
      <template is="dom-if" if="[[!__hasChildren(item)]]">
        <map-menu-item title="[[item.title]]" url="[[item.url]]" icon="bookmark"></map-menu-item>
      </template>
    </template>

  </template>
  <script>
    Polymer({
      is: 'map-menu-builder',
      items: {
        type: Array,
        value: []
      },

      /** 
       * Determine if a menu item has children
       */
      __hasChildren: function (item) {
        return item.children.length > 0;
      },
    });
  </script>
</dom-module>